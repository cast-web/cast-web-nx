<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@cast-web/client</title>
	<meta name="description" content="Documentation for @cast-web/client">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@cast-web/client</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>@cast-web/client</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#castv2-client" id="castv2-client" style="color: inherit; text-decoration: none;">
					<h1>castv2-client</h1>
				</a>
				<a href="#a-chromecast-client-based-on-the-new-castv2-protocol" id="a-chromecast-client-based-on-the-new-castv2-protocol" style="color: inherit; text-decoration: none;">
					<h3>A Chromecast client based on the new (CASTV2) protocol</h3>
				</a>
				<p>This is a fork of <a href="https://github.com/thibauts/node-castv2-client" title="node-castv2">node-castv2-client</a> that aims to improve on the following:</p>
				<ul>
					<li>✅ TS typing</li>
					<li>⏳ promised based API (where it makes sense)</li>
					<li>✅ unified code styling</li>
					<li>✅ full ES6 syntax</li>
					<li>⏳ unit testing</li>
					<li>⏳ tsdoc</li>
					<li>✨ and more to come!</li>
				</ul>
				<p>The api is still subject to change.</p>
				<p>This module implements a Chromecast client over the new (CASTV2) protocol. A sender app for the <code>DefaultMediaReceiver</code> application is provided, as well as an <code>Application</code> base class and implementations of the basic protocols (see the <code>controllers</code> directory) that should make implementing custom senders a breeze.</p>
				<p>This implementation tries to stay close and true to the protocol. For details about protocol internals please see <a href="https://github.com/thibauts/node-castv2#protocol-description">https://github.com/thibauts/node-castv2</a>. </p>
				<p>For advanced use, like using <a href="https://github.com/thibauts/node-castv2-client/wiki/How-to-use-subtitles-with-the-DefaultMediaReceiver-app">subtitles</a> with the DefaultMediaReceiver check the <a href="https://github.com/thibauts/node-castv2-client/wiki">wiki</a>.</p>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code class="language-bash"><span style="color: #000000">$ npm install castv2-client</span>
</code></pre>
				<p>On windows, to avoid native modules dependencies, use</p>
				<pre><code class="language-bash"><span style="color: #000000">$ npm install castv2-client --no-optional</span>
</code></pre>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h2>Examples</h2>
				</a>
				<p>###Launching a stream on the device</p>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Client</span><span style="color: #000000">                = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;castv2-client&#039;</span><span style="color: #000000">).</span><span style="color: #001080">Client</span><span style="color: #000000">;</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">DefaultMediaReceiver</span><span style="color: #000000">  = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;castv2-client&#039;</span><span style="color: #000000">).</span><span style="color: #001080">DefaultMediaReceiver</span><span style="color: #000000">;</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mdns</span><span style="color: #000000">                  = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;mdns&#039;</span><span style="color: #000000">);</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">browser</span><span style="color: #000000"> = </span><span style="color: #001080">mdns</span><span style="color: #000000">.</span><span style="color: #795E26">createBrowser</span><span style="color: #000000">(</span><span style="color: #001080">mdns</span><span style="color: #000000">.</span><span style="color: #795E26">tcp</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;googlecast&#039;</span><span style="color: #000000">));</span>

<span style="color: #001080">browser</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;serviceUp&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">function</span><span style="color: #000000">(</span><span style="color: #001080">service</span><span style="color: #000000">) {</span>
<span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;found device &quot;%s&quot; at %s:%d&#039;</span><span style="color: #000000">, </span><span style="color: #001080">service</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">, </span><span style="color: #001080">service</span><span style="color: #000000">.</span><span style="color: #001080">addresses</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">], </span><span style="color: #001080">service</span><span style="color: #000000">.</span><span style="color: #001080">port</span><span style="color: #000000">);</span>
<span style="color: #000000">  </span><span style="color: #795E26">ondeviceup</span><span style="color: #000000">(</span><span style="color: #001080">service</span><span style="color: #000000">.</span><span style="color: #001080">addresses</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">]);</span>
<span style="color: #000000">  </span><span style="color: #001080">browser</span><span style="color: #000000">.</span><span style="color: #795E26">stop</span><span style="color: #000000">();</span>
<span style="color: #000000">});</span>

<span style="color: #001080">browser</span><span style="color: #000000">.</span><span style="color: #795E26">start</span><span style="color: #000000">();</span>

<span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">ondeviceup</span><span style="color: #000000">(</span><span style="color: #001080">host</span><span style="color: #000000">) {</span>

<span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">client</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Client</span><span style="color: #000000">();</span>

<span style="color: #000000">  </span><span style="color: #001080">client</span><span style="color: #000000">.</span><span style="color: #795E26">connect</span><span style="color: #000000">(</span><span style="color: #001080">host</span><span style="color: #000000">, </span><span style="color: #0000FF">function</span><span style="color: #000000">() {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;connected, launching app ...&#039;</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #001080">client</span><span style="color: #000000">.</span><span style="color: #795E26">launch</span><span style="color: #000000">(</span><span style="color: #001080">DefaultMediaReceiver</span><span style="color: #000000">, </span><span style="color: #0000FF">function</span><span style="color: #000000">(</span><span style="color: #001080">err</span><span style="color: #000000">, </span><span style="color: #001080">player</span><span style="color: #000000">) {</span>
<span style="color: #000000">      </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">media</span><span style="color: #000000"> = {</span>

<span style="color: #000000">          </span><span style="color: #008000">// Here you can plug an URL to any mp4, webm, mp3 or jpg file with the proper contentType.</span>
<span style="color: #000000">        </span><span style="color: #001080">contentId:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;http://commondatastorage.googleapis.com/gtv-videos-bucket/big_buck_bunny_1080p.mp4&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">contentType:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;video/mp4&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">streamType:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;BUFFERED&#039;</span><span style="color: #000000">, </span><span style="color: #008000">// or LIVE</span>

<span style="color: #000000">        </span><span style="color: #008000">// Title and cover displayed while buffering</span>
<span style="color: #000000">        </span><span style="color: #001080">metadata:</span><span style="color: #000000"> {</span>
<span style="color: #000000">          </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #001080">metadataType:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #001080">title:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;Big Buck Bunny&quot;</span><span style="color: #000000">, </span>
<span style="color: #000000">          </span><span style="color: #001080">images:</span><span style="color: #000000"> [</span>
<span style="color: #000000">            { </span><span style="color: #001080">url:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg&#039;</span><span style="color: #000000"> }</span>
<span style="color: #000000">          ]</span>
<span style="color: #000000">        }        </span>
<span style="color: #000000">      };</span>

<span style="color: #000000">      </span><span style="color: #001080">player</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;status&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">function</span><span style="color: #000000">(</span><span style="color: #001080">status</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;status broadcast playerState=%s&#039;</span><span style="color: #000000">, </span><span style="color: #001080">status</span><span style="color: #000000">.</span><span style="color: #001080">playerState</span><span style="color: #000000">);</span>
<span style="color: #000000">      });</span>

<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;app &quot;%s&quot; launched, loading media %s ...&#039;</span><span style="color: #000000">, </span><span style="color: #001080">player</span><span style="color: #000000">.</span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #001080">displayName</span><span style="color: #000000">, </span><span style="color: #001080">media</span><span style="color: #000000">.</span><span style="color: #001080">contentId</span><span style="color: #000000">);</span>

<span style="color: #000000">      </span><span style="color: #001080">player</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">media</span><span style="color: #000000">, { </span><span style="color: #001080">autoplay:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000"> }, </span><span style="color: #0000FF">function</span><span style="color: #000000">(</span><span style="color: #001080">err</span><span style="color: #000000">, </span><span style="color: #001080">status</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;media loaded playerState=%s&#039;</span><span style="color: #000000">, </span><span style="color: #001080">status</span><span style="color: #000000">.</span><span style="color: #001080">playerState</span><span style="color: #000000">);</span>

<span style="color: #000000">        </span><span style="color: #008000">// Seek to 2 minutes after 15 seconds playing.</span>
<span style="color: #000000">        </span><span style="color: #795E26">setTimeout</span><span style="color: #000000">(</span><span style="color: #0000FF">function</span><span style="color: #000000">() {</span>
<span style="color: #000000">          </span><span style="color: #001080">player</span><span style="color: #000000">.</span><span style="color: #795E26">seek</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">*</span><span style="color: #098658">60</span><span style="color: #000000">, </span><span style="color: #0000FF">function</span><span style="color: #000000">(</span><span style="color: #001080">err</span><span style="color: #000000">, </span><span style="color: #001080">status</span><span style="color: #000000">) {</span>
<span style="color: #000000">            </span><span style="color: #008000">//</span>
<span style="color: #000000">          });</span>
<span style="color: #000000">        }, </span><span style="color: #098658">15000</span><span style="color: #000000">);</span>

<span style="color: #000000">      });</span>

<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">  });</span>

<span style="color: #000000">  </span><span style="color: #001080">client</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;error&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">function</span><span style="color: #000000">(</span><span style="color: #001080">err</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Error: %s&#039;</span><span style="color: #000000">, </span><span style="color: #001080">err</span><span style="color: #000000">.</span><span style="color: #001080">message</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">client</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">  });</span>

<span style="color: #000000">}</span>
</code></pre>
				<p>###Other examples</p>
				<p>Check the examples directory.</p>
				<a href="#contributors" id="contributors" style="color: inherit; text-decoration: none;">
					<h2>Contributors</h2>
				</a>
				<ul>
					<li><a href="https://github.com/xat">xat</a> (Simon Kusterer)</li>
					<li><a href="https://github.com/angelnu">angelnu</a> (Angel Nunez Mencias)</li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/application.html" class="tsd-kind-icon">Application</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/basecontroller.html" class="tsd-kind-icon">Base<wbr>Controller</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/connectioncontroller.html" class="tsd-kind-icon">Connection<wbr>Controller</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/defaultmediareceiver.html" class="tsd-kind-icon">Default<wbr>Media<wbr>Receiver</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/genericmediaapplication.html" class="tsd-kind-icon">Generic<wbr>Media<wbr>Application</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/heartbeatcontroller.html" class="tsd-kind-icon">Heartbeat<wbr>Controller</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mediacontroller.html" class="tsd-kind-icon">Media<wbr>Controller</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/platformsender.html" class="tsd-kind-icon">Platform<wbr>Sender</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/receivercontroller.html" class="tsd-kind-icon">Receiver<wbr>Controller</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/requestresponsecontroller.html" class="tsd-kind-icon">Request<wbr>Response<wbr>Controller</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/sender.html" class="tsd-kind-icon">Sender</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/applicationsenderevents.html" class="tsd-kind-icon">Application<wbr>Sender<wbr>Events</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter">
						<a href="interfaces/basecontrollerevents.html" class="tsd-kind-icon">Base<wbr>Controller<wbr>Events</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter">
						<a href="interfaces/basecontrollermessage.html" class="tsd-kind-icon">Base<wbr>Controller<wbr>Message</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/connectioncontrollerevents.html" class="tsd-kind-icon">Connection<wbr>Controller<wbr>Events</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/heartbeatcontrollerevents.html" class="tsd-kind-icon">Heartbeat<wbr>Controller<wbr>Events</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/mediacontrollerevents.html" class="tsd-kind-icon">Media<wbr>Controller<wbr>Events</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/platformsenderevents.html" class="tsd-kind-icon">Platform<wbr>Sender<wbr>Events</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/receivercontrollerevents.html" class="tsd-kind-icon">Receiver<wbr>Controller<wbr>Events</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#errorcallback" class="tsd-kind-icon">Error<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#errorstatuscallback" class="tsd-kind-icon">Error<wbr>Status<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#messagecallback" class="tsd-kind-icon">Message<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#statuscallback" class="tsd-kind-icon">Status<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="modules.html#client" class="tsd-kind-icon">Client</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>